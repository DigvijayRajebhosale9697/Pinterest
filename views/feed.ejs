<% include ./partials/header.ejs %>
<div class="w-full min-h-screen bg-zinc-800 px-6 py-8">
    <div class="cards flex flex-wrap gap-6 justify-center">
        <% posts.forEach(function(e){ %>
            <div class="card w-40 md:w-48 text-white">
                <div class="w-full h-auto rounded-lg overflow-hidden cursor-pointer"
                    onclick="openModal('/images/uploads/<%= e.image %>', '<%= e.title %>', '<%= e.description %>')">
                    <img class="w-full h-full object-cover" src="/images/uploads/<%= e.image %>" alt="<%= e.title %>">
                </div>
                <h5 class="mt-2 text-sm">
                    <%= e.title %>
                </h5>
                <h3 class="text-md mt-1 opacity-60">@ <%= e.user.username %></h3>
            </div>
        <% }) %>
    </div>
</div>

<!-- Modal -->
<div id="imageModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 hidden">
    <div class="relative max-w-screen-lg mx-auto p-4">
        <span class="absolute top-2 right-2 text-white text-3xl cursor-pointer bg-gray-700 bg-opacity-80 rounded-full px-2 py-1"
            onclick="closeModal()">&times;</span>
        <img id="modalImage" class="max-h-[70vh] mx-auto object-contain mt-4" src="" alt="">
        <h3 id="modalTitle" class="text-center text-white mt-4"></h3>
        <p id="modalDescription" class="text-center text-white mt-4"></p>
    </div>
</div>

<script>
    function openModal(imageSrc, title, description) {
        document.getElementById('modalImage').src = imageSrc;
        document.getElementById('modalTitle').innerText = title;
        document.getElementById('modalDescription').innerText = description;
        document.getElementById('imageModal').classList.remove('hidden');
    }

    function closeModal() {
        document.getElementById('imageModal').classList.add('hidden');
    }
</script>
<% include ./partials/footer.ejs %>
